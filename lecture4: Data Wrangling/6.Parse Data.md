# Exercise 6

This exercise gives a great chance for me to learn `sed` and `awk`. I choose to parse the [htm file](https://stats.wikimedia.org/EN/TablesWikipediaZZ.htm).  

1. First, I've learned that `sed` can match all the lines between 2 patterns. So I use `sed -n '/<table.*>/,/<\/table>/p'` to print all the contents in the table. Btw, `-n` would suppress the automatic print of `sed`.
2. Then I found the last few lines would be printed too. I'm confused, then I learned that `sed` cannot match these 2 patterns in the same line. For example, I got 5 lines of `<table...>...</table>`. In line 5, the first pattern `<table.*>` is matched, but the last `</table>` **CANNOT BE MATCHED**! So all the contents begins from line 5 till the end of the file would be printed.
3. It seems `sed` cannot handle this problem. Then I found `awk` is much more powerful. I can use `awk '/<table.*>/,/<\/table>/'` to easily solve this problem. It's a shorthand of the following `awk` program:

    ```awk
    awk '
    /<table.*>/ { in_table += 1 }
    in_table > 0 { print }
    /<\/table>/ { in_table -= 1 }
    '
    ```

4. Then extract data from the table.
